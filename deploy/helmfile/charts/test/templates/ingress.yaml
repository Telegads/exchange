apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: exchange-{{.Environment.Name}}
  annotations:
    kubernetes.io/ingress.class: haproxy
spec:
  tls:
    - hosts:
        - {{ .Values.host }}
      secretName: telegads-test-cert
  rules:
    - host: {{ .Values.host }}
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: exchange-{{.Environment.Name}}
                port:
                  number: 3000
---
kind: Secret
apiVersion: v1
metadata:
  name: telegads-test-cert
type: Opaque
stringData:
  tls.crt: |
    -----BEGIN CERTIFICATE-----
    MIIFXDCCBESgAwIBAgISA/OaF+XKZbrJXhvWPTKGHMa2MA0GCSqGSIb3DQEBCwUA
    MDIxCzAJBgNVBAYTAlVTMRYwFAYDVQQKEw1MZXQncyBFbmNyeXB0MQswCQYDVQQD
    EwJSMzAeFw0yMjEwMDUxOTM5MDRaFw0yMzAxMDMxOTM5MDNaMBYxFDASBgNVBAMT
    C3RlbGVnYWRzLnV6MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAnWUD
    9cBzjoWa9xaGoBbiWYS67QnsWL2F2X1xvOmu/3m6fsaBvFiy3e1lV4gJdx7JA1tf
    70qCabpDeKM7nVHxVXm1+RWe0FR2oEVqRk+MufVaY5iQLquudBTFwZ9tLqkr3Tvs
    Z8gj1yp+JDkPjxPPILnP3dvHePk0CPhJa8CRnS5tYFp/JQ2DPM81hIPefNJv6xuJ
    oiTx/Wu3vwfIyVuZjp9XhHhw0zgJnDyOMeKmexf+WQ2dKmrxX3oLZ7zcMqZTBk/z
    sM/kTrtwKF+USllyWyi6UdKRQSo7MPaidmn+K0V1RxIXWfVW5dV3Lnp65M52f6Ps
    UXD3gwVYrr9B4LvAkQIDAQABo4IChjCCAoIwDgYDVR0PAQH/BAQDAgWgMB0GA1Ud
    JQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAMBgNVHRMBAf8EAjAAMB0GA1UdDgQW
    BBTCuBOdXBm0WcZINDBcFpicXpzThjAfBgNVHSMEGDAWgBQULrMXt1hWy65QCUDm
    H6+dixTCxjBVBggrBgEFBQcBAQRJMEcwIQYIKwYBBQUHMAGGFWh0dHA6Ly9yMy5v
    LmxlbmNyLm9yZzAiBggrBgEFBQcwAoYWaHR0cDovL3IzLmkubGVuY3Iub3JnLzBV
    BgNVHREETjBMghNzdGFnaW5nLnRlbGVnYWRzLnV6ggt0ZWxlZ2Fkcy51eoIXd3d3
    LnN0YWdpbmcudGVsZWdhZHMudXqCD3d3dy50ZWxlZ2Fkcy51ejBMBgNVHSAERTBD
    MAgGBmeBDAECATA3BgsrBgEEAYLfEwEBATAoMCYGCCsGAQUFBwIBFhpodHRwOi8v
    Y3BzLmxldHNlbmNyeXB0Lm9yZzCCAQUGCisGAQQB1nkCBAIEgfYEgfMA8QB2ALc+
    +yTfnE26dfI5xbpY9Gxd/ELPep81xJ4dCYEl7bSZAAABg6nfkl4AAAQDAEcwRQIg
    QK7H5z/yinY5RfNfGua6e4j6IQ+fV3K9XOp8sMrts0ECIQDD7K7QUtiUXMnRfHIa
    3aM2v0EyuqM26+lY264WlIrAiQB3AOg+0No+9QY1MudXKLyJa8kD08vREWvs62nh
    d31tBr1uAAABg6nfkkwAAAQDAEgwRgIhAPTZgZ68HnuhLO3RBZ0F0eeSE7CL6orD
    YB5bqUBCO8nPAiEAxRx0WiPIUyvpPq9P20fuURRW3iQFiluL5NjCG9MCcDwwDQYJ
    KoZIhvcNAQELBQADggEBAF2ukEjXiF28maE6MHxf8XiNGEpbOLrQNHuzAeRGVwjp
    2Ksx6o8MKQ/3edNJyW+HW9Q+irewiuMLI1eD359Kc+ZRBVGhot43Q8BILRSTzHcx
    0XuyyTVnngcpjskv/LjlQbjWANvf15X24odgG2dX8JQC+NRNqIs8LzXXTDGI/RZY
    CXYIXeewR4dMbQ/DOFgNQfrOu5QF7O6pVBKBVuSrK+K725NMCDy1YLRt2ezXP1Sl
    xLQBC+pRqI7EH+2+DoD/zpipc0VES58Gw2G7Iwb/SV3StAacTZ6WzSAe4AnBd9wT
    TV0a3MFkOghg0UUJqTicdJx/C+8Z5EZk4UAfh/r6tDg=
    -----END CERTIFICATE-----
    -----BEGIN CERTIFICATE-----
    MIIFFjCCAv6gAwIBAgIRAJErCErPDBinU/bWLiWnX1owDQYJKoZIhvcNAQELBQAw
    TzELMAkGA1UEBhMCVVMxKTAnBgNVBAoTIEludGVybmV0IFNlY3VyaXR5IFJlc2Vh
    cmNoIEdyb3VwMRUwEwYDVQQDEwxJU1JHIFJvb3QgWDEwHhcNMjAwOTA0MDAwMDAw
    WhcNMjUwOTE1MTYwMDAwWjAyMQswCQYDVQQGEwJVUzEWMBQGA1UEChMNTGV0J3Mg
    RW5jcnlwdDELMAkGA1UEAxMCUjMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEK
    AoIBAQC7AhUozPaglNMPEuyNVZLD+ILxmaZ6QoinXSaqtSu5xUyxr45r+XXIo9cP
    R5QUVTVXjJ6oojkZ9YI8QqlObvU7wy7bjcCwXPNZOOftz2nwWgsbvsCUJCWH+jdx
    sxPnHKzhm+/b5DtFUkWWqcFTzjTIUu61ru2P3mBw4qVUq7ZtDpelQDRrK9O8Zutm
    NHz6a4uPVymZ+DAXXbpyb/uBxa3Shlg9F8fnCbvxK/eG3MHacV3URuPMrSXBiLxg
    Z3Vms/EY96Jc5lP/Ooi2R6X/ExjqmAl3P51T+c8B5fWmcBcUr2Ok/5mzk53cU6cG
    /kiFHaFpriV1uxPMUgP17VGhi9sVAgMBAAGjggEIMIIBBDAOBgNVHQ8BAf8EBAMC
    AYYwHQYDVR0lBBYwFAYIKwYBBQUHAwIGCCsGAQUFBwMBMBIGA1UdEwEB/wQIMAYB
    Af8CAQAwHQYDVR0OBBYEFBQusxe3WFbLrlAJQOYfr52LFMLGMB8GA1UdIwQYMBaA
    FHm0WeZ7tuXkAXOACIjIGlj26ZtuMDIGCCsGAQUFBwEBBCYwJDAiBggrBgEFBQcw
    AoYWaHR0cDovL3gxLmkubGVuY3Iub3JnLzAnBgNVHR8EIDAeMBygGqAYhhZodHRw
    Oi8veDEuYy5sZW5jci5vcmcvMCIGA1UdIAQbMBkwCAYGZ4EMAQIBMA0GCysGAQQB
    gt8TAQEBMA0GCSqGSIb3DQEBCwUAA4ICAQCFyk5HPqP3hUSFvNVneLKYY611TR6W
    PTNlclQtgaDqw+34IL9fzLdwALduO/ZelN7kIJ+m74uyA+eitRY8kc607TkC53wl
    ikfmZW4/RvTZ8M6UK+5UzhK8jCdLuMGYL6KvzXGRSgi3yLgjewQtCPkIVz6D2QQz
    CkcheAmCJ8MqyJu5zlzyZMjAvnnAT45tRAxekrsu94sQ4egdRCnbWSDtY7kh+BIm
    lJNXoB1lBMEKIq4QDUOXoRgffuDghje1WrG9ML+Hbisq/yFOGwXD9RiX8F6sw6W4
    avAuvDszue5L3sz85K+EC4Y/wFVDNvZo4TYXao6Z0f+lQKc0t8DQYzk1OXVu8rp2
    yJMC6alLbBfODALZvYH7n7do1AZls4I9d1P4jnkDrQoxB3UqQ9hVl3LEKQ73xF1O
    yK5GhDDX8oVfGKF5u+decIsH4YaTw7mP3GFxJSqv3+0lUFJoi5Lc5da149p90Ids
    hCExroL1+7mryIkXPeFM5TgO9r0rvZaBFOvV2z0gp35Z0+L4WPlbuEjN/lxPFin+
    HlUjr8gRsI3qfJOQFy/9rKIJR0Y/8Omwt/8oTWgy1mdeHmmjk7j1nYsvC9JSQ6Zv
    MldlTTKB3zhThV1+XWYp6rjd5JW1zbVWEkLNxE7GJThEUG3szgBVGP7pSWTUTsqX
    nLRbwHOoq7hHwg==
    -----END CERTIFICATE-----
    -----BEGIN CERTIFICATE-----
    MIIFYDCCBEigAwIBAgIQQAF3ITfU6UK47naqPGQKtzANBgkqhkiG9w0BAQsFADA/
    MSQwIgYDVQQKExtEaWdpdGFsIFNpZ25hdHVyZSBUcnVzdCBDby4xFzAVBgNVBAMT
    DkRTVCBSb290IENBIFgzMB4XDTIxMDEyMDE5MTQwM1oXDTI0MDkzMDE4MTQwM1ow
    TzELMAkGA1UEBhMCVVMxKTAnBgNVBAoTIEludGVybmV0IFNlY3VyaXR5IFJlc2Vh
    cmNoIEdyb3VwMRUwEwYDVQQDEwxJU1JHIFJvb3QgWDEwggIiMA0GCSqGSIb3DQEB
    AQUAA4ICDwAwggIKAoICAQCt6CRz9BQ385ueK1coHIe+3LffOJCMbjzmV6B493XC
    ov71am72AE8o295ohmxEk7axY/0UEmu/H9LqMZshftEzPLpI9d1537O4/xLxIZpL
    wYqGcWlKZmZsj348cL+tKSIG8+TA5oCu4kuPt5l+lAOf00eXfJlII1PoOK5PCm+D
    LtFJV4yAdLbaL9A4jXsDcCEbdfIwPPqPrt3aY6vrFk/CjhFLfs8L6P+1dy70sntK
    4EwSJQxwjQMpoOFTJOwT2e4ZvxCzSow/iaNhUd6shweU9GNx7C7ib1uYgeGJXDR5
    bHbvO5BieebbpJovJsXQEOEO3tkQjhb7t/eo98flAgeYjzYIlefiN5YNNnWe+w5y
    sR2bvAP5SQXYgd0FtCrWQemsAXaVCg/Y39W9Eh81LygXbNKYwagJZHduRze6zqxZ
    Xmidf3LWicUGQSk+WT7dJvUkyRGnWqNMQB9GoZm1pzpRboY7nn1ypxIFeFntPlF4
    FQsDj43QLwWyPntKHEtzBRL8xurgUBN8Q5N0s8p0544fAQjQMNRbcTa0B7rBMDBc
    SLeCO5imfWCKoqMpgsy6vYMEG6KDA0Gh1gXxG8K28Kh8hjtGqEgqiNx2mna/H2ql
    PRmP6zjzZN7IKw0KKP/32+IVQtQi0Cdd4Xn+GOdwiK1O5tmLOsbdJ1Fu/7xk9TND
    TwIDAQABo4IBRjCCAUIwDwYDVR0TAQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAQYw
    SwYIKwYBBQUHAQEEPzA9MDsGCCsGAQUFBzAChi9odHRwOi8vYXBwcy5pZGVudHJ1
    c3QuY29tL3Jvb3RzL2RzdHJvb3RjYXgzLnA3YzAfBgNVHSMEGDAWgBTEp7Gkeyxx
    +tvhS5B1/8QVYIWJEDBUBgNVHSAETTBLMAgGBmeBDAECATA/BgsrBgEEAYLfEwEB
    ATAwMC4GCCsGAQUFBwIBFiJodHRwOi8vY3BzLnJvb3QteDEubGV0c2VuY3J5cHQu
    b3JnMDwGA1UdHwQ1MDMwMaAvoC2GK2h0dHA6Ly9jcmwuaWRlbnRydXN0LmNvbS9E
    U1RST09UQ0FYM0NSTC5jcmwwHQYDVR0OBBYEFHm0WeZ7tuXkAXOACIjIGlj26Ztu
    MA0GCSqGSIb3DQEBCwUAA4IBAQAKcwBslm7/DlLQrt2M51oGrS+o44+/yQoDFVDC
    5WxCu2+b9LRPwkSICHXM6webFGJueN7sJ7o5XPWioW5WlHAQU7G75K/QosMrAdSW
    9MUgNTP52GE24HGNtLi1qoJFlcDyqSMo59ahy2cI2qBDLKobkx/J3vWraV0T9VuG
    WCLKTVXkcGdtwlfFRjlBz4pYg1htmf5X6DYO8A4jqv2Il9DjXA6USbW1FzXSLr9O
    he8Y4IWS6wY7bCkjCWDcRQJMEhg76fsO3txE+FiYruq9RUWhiF1myv4Q6W+CyBFC
    Dfvp7OOGAN6dEOM4+qR9sdjoSYKEBpsr6GtPAQw4dy753ec5
    -----END CERTIFICATE-----
  tls.key: |
    -----BEGIN PRIVATE KEY-----
    MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCdZQP1wHOOhZr3
    FoagFuJZhLrtCexYvYXZfXG86a7/ebp+xoG8WLLd7WVXiAl3HskDW1/vSoJpukN4
    ozudUfFVebX5FZ7QVHagRWpGT4y59VpjmJAuq650FMXBn20uqSvdO+xnyCPXKn4k
    OQ+PE88guc/d28d4+TQI+ElrwJGdLm1gWn8lDYM8zzWEg9580m/rG4miJPH9a7e/
    B8jJW5mOn1eEeHDTOAmcPI4x4qZ7F/5ZDZ0qavFfegtnvNwyplMGT/Owz+ROu3Ao
    X5RKWXJbKLpR0pFBKjsw9qJ2af4rRXVHEhdZ9Vbl1XcuenrkznZ/o+xRcPeDBViu
    v0Hgu8CRAgMBAAECggEAK6XsW7YTtcYCbBxgmDvQaK/g4MR8OT3RxTc/F/scLzgU
    Sn0FVHSqodXoYUZWDaVJbHdmGueoU+a2OFnYOfAUA7a9isZ+pNqPjTHC353G8nkC
    qJUSAwdUWVe7Yc8zCZobkn5AOKWtnslncucqE+0T50jwRt/gqQE+92/XeJzOJO7g
    JTeCi3wmbkqUTtppJGpxSv8biNJ4QMTzIQZtg9gkLsDckFlIm5Xl8WbQsscv52wZ
    9FEArVEA7wpSdJcfWJ6xw1cL9Z7IZMXq+a48JbuhzLB/u7sn/LvFtgfk5dB4TRKp
    UizpY00mLq5RY21KM1nF9qt3wqTP7aWa1dq6UC6Z8wKBgQDTcN/c4z2/5Nn1kHnJ
    9n/3prK2tq1+AoS03Hw7BDN9+aFG/6BqcT1ujxZAOsAM3wMlUHAwqz1lgnB0dX07
    CM8XqujBw78IehHRfqT7hp1HcPNh8HrZiTUrm3lnhVRkq/6rKIFdhsdwS9UOCsIO
    myJ4uf5Es33eCurJRcuHas7kowKBgQC+kF7TNHEH9KkzK+ZqUq0EPpKGKv/9zhQ0
    4eOsVQvvn0KhDIweLN5retaQbWLOl2XbMJ5siqXtDc40Wtj+xfyjVHYoJfKKA2iV
    LpT7vrsN7dhm66MmfzPT0G3e7mOKgJuvc1KUOi4j9g0r3Qk3c1EFiLhyLnJI93Oq
    mIvxWpClOwKBgQCfRZxsEIUYQrRohS8oklVs4JYoikz/6be7YYb3EcAT+fGhwLc+
    1xRWbtRtB5RZXbhJ6GDKWIOELpC1OTdfO9B73JM+Okxxfzpi24o9qfZZtVywfuyb
    Zv61XYVDFK0wtFq+5WElaXxcO9M+o53wUK3T0Q8XAzoiA4k+miOpWyyEDwKBgEIE
    YdVpZX8ME1HW84wB+E5wHvK8EtMqgXWQi/83t1rcIYkJf8E0ahlyBMMkIgbQDElT
    Ho8buT/WeIlKr8ITdOJgcE6YVt3ZMHH+IT7VZJf+velp2KuNhbbrjiSdEX757vVp
    TkJrpXBv3UBE4tyC5p60LrHfxVfh4gBHuLN0XIfhAoGAdK+N/WfYJ5pnAuhB31eg
    rn8zBJNCiGO7WzCbGn8B8eAscGD93AXGBSaReKPXGdrP+hHkiJLSSCqZVy5lY9pN
    0gvi8AMAM7WGHpHnRHvdcTPbRqtdhOHMNqq09z3lYklKseUEmuDjlpqpLcUigLI0
    Um1bq8XIoscei8AjwUW+lsc=
    -----END PRIVATE KEY-----
